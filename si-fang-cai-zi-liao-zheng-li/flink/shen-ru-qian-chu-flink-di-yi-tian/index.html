<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Flinkå­¦ä¹ ç¬”è®°, å¼ æ–‡è¾‰çš„ç¬”è®°">
    <meta name="description" content="è¿™æ˜¯æˆ‘çš„åšå®¢ç½‘ç«™">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Flinkå­¦ä¹ ç¬”è®° | å¼ æ–‡è¾‰çš„ç¬”è®°</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">å¼ æ–‡è¾‰çš„ç¬”è®°</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">å¼ æ–‡è¾‰çš„ç¬”è®°</div>
        <div class="logo-desc">
            
            è¿™æ˜¯æˆ‘çš„åšå®¢ç½‘ç«™
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/18.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Flinkå­¦ä¹ ç¬”è®°</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Flink/">
                                <span class="chip bg-color">Flink</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Flink/" class="post-category">
                                Flink
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2022-01-24
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Flinkè¯¾ç¨‹ç¬¬ä¸€å¤©"><a href="#Flinkè¯¾ç¨‹ç¬¬ä¸€å¤©" class="headerlink" title="Flinkè¯¾ç¨‹ç¬¬ä¸€å¤©"></a>Flinkè¯¾ç¨‹ç¬¬ä¸€å¤©</h1><h2 id="1ï¸âƒ£-ä¸€-ã€è¯¾å‰å‡†å¤‡"><a href="#1ï¸âƒ£-ä¸€-ã€è¯¾å‰å‡†å¤‡" class="headerlink" title="1ï¸âƒ£ ä¸€ ã€è¯¾å‰å‡†å¤‡"></a>1ï¸âƒ£ ä¸€ ã€è¯¾å‰å‡†å¤‡</h2><ol>
<li>æ­å»ºå¥½Hadoopé›†ç¾¤</li>
</ol>
<h2 id="two-äºŒ-ã€è¯¾å ‚ä¸»é¢˜"><a href="#two-äºŒ-ã€è¯¾å ‚ä¸»é¢˜" class="headerlink" title=":two: äºŒ ã€è¯¾å ‚ä¸»é¢˜"></a>:two: äºŒ ã€è¯¾å ‚ä¸»é¢˜</h2><ol>
<li>äº†è§£FlinkåŸºæœ¬åŸç†</li>
<li>æŒæ¡Flinkä»»åŠ¡å¦‚ä½•æäº¤åˆ°é›†ç¾¤</li>
</ol>
<h2 id="3ï¸âƒ£-ä¸‰-ã€è¯¾ç¨‹ç›®æ ‡"><a href="#3ï¸âƒ£-ä¸‰-ã€è¯¾ç¨‹ç›®æ ‡" class="headerlink" title="3ï¸âƒ£ ä¸‰ ã€è¯¾ç¨‹ç›®æ ‡"></a>3ï¸âƒ£ ä¸‰ ã€è¯¾ç¨‹ç›®æ ‡</h2><ul>
<li><p>äº†è§£Flinkçš„åŸºæœ¬åŸç†</p>
</li>
<li><p>æ­å»ºFlink on YARNé›†ç¾¤</p>
</li>
<li><p>æŒæ¡Flinkåº”ç”¨ç¨‹åºçš„ç¼–å†™</p>
</li>
</ul>
<h2 id="4ï¸âƒ£-å››-ã€çŸ¥è¯†è¦ç‚¹"><a href="#4ï¸âƒ£-å››-ã€çŸ¥è¯†è¦ç‚¹" class="headerlink" title="4ï¸âƒ£ å›› ã€çŸ¥è¯†è¦ç‚¹"></a>4ï¸âƒ£ å›› ã€çŸ¥è¯†è¦ç‚¹</h2><h3 id="ğŸ“–-1-Flinkç®€ä»‹"><a href="#ğŸ“–-1-Flinkç®€ä»‹" class="headerlink" title="ğŸ“–  1.  Flinkç®€ä»‹"></a>ğŸ“–  1.  Flinkç®€ä»‹</h3><ul>
<li><strong>Apache FlinkÂ® â€” Stateful Computations over Data Streams</strong></li>
<li>Apache Flink æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼<font color="red">å¤§æ•°æ®å¤„ç†å¼•æ“</font>ï¼Œå¯å¯¹<font color="red">æœ‰ç•Œæ•°æ®æµ</font>å’Œ<font color="red">æ— ç•Œæ•°æ®æµ</font>è¿›è¡Œ<font color="red">æœ‰çŠ¶æ€</font>çš„è®¡ç®—ã€‚Flink èƒ½åœ¨æ‰€æœ‰å¸¸è§é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶èƒ½ä»¥å†…å­˜é€Ÿåº¦å’Œä»»æ„è§„æ¨¡è¿›è¡Œè®¡ç®—<ul>
<li>å®˜ç½‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://flink.apache.org/">http://flink.apache.org</a></li>
</ul>
</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/flink.png" alt="flink"></p>
<h4 id="1-1-å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"><a href="#1-1-å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®" class="headerlink" title="1.1 å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®"></a>1.1 å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®</h4><ul>
<li><p>ä»»ä½•ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥å½¢æˆä¸€ç§äº‹ä»¶æµã€‚ä¿¡ç”¨å¡äº¤æ˜“ã€ä¼ æ„Ÿå™¨æµ‹é‡ã€æœºå™¨æ—¥å¿—ã€ç½‘ç«™æˆ–ç§»åŠ¨åº”ç”¨ç¨‹åºä¸Šçš„ç”¨æˆ·äº¤äº’è®°å½•ï¼Œæ‰€æœ‰è¿™äº›æ•°æ®éƒ½å½¢æˆä¸€ç§æµã€‚</p>
</li>
<li><p>æ•°æ®å¯ä»¥è¢«ä½œä¸º&#x3D;&#x3D;æ— ç•Œ&#x3D;&#x3D;æˆ–è€…&#x3D;&#x3D;æœ‰ç•Œ&#x3D;&#x3D;æµæ¥å¤„ç†ã€‚</p>
</li>
</ul>
<pre><code>(1) æ— ç•Œæµ 
    æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä½†æ²¡æœ‰å®šä¹‰æµçš„ç»“æŸã€‚å®ƒä»¬ä¼šæ— ä¼‘æ­¢åœ°äº§ç”Ÿæ•°æ®ã€‚æ— ç•Œæµçš„æ•°æ®å¿…é¡»æŒç»­å¤„ç†ï¼Œå³æ•°æ®è¢«æ‘„å–åéœ€è¦ç«‹åˆ»å¤„ç†ã€‚æˆ‘ä»¬ä¸èƒ½ç­‰åˆ°æ‰€æœ‰æ•°æ®éƒ½åˆ°è¾¾å†å¤„ç†ï¼Œå› ä¸ºè¾“å…¥æ˜¯æ— é™çš„ï¼Œåœ¨ä»»ä½•æ—¶å€™è¾“å…¥éƒ½ä¸ä¼šå®Œæˆã€‚å¤„ç†æ— ç•Œæ•°æ®é€šå¸¸è¦æ±‚ä»¥ç‰¹å®šé¡ºåºæ‘„å–äº‹ä»¶ï¼Œä¾‹å¦‚äº‹ä»¶å‘ç”Ÿçš„é¡ºåºï¼Œä»¥ä¾¿èƒ½å¤Ÿæ¨æ–­ç»“æœçš„å®Œæ•´æ€§ã€‚
    
(2) æœ‰ç•Œæµ 
    æœ‰å®šä¹‰æµçš„å¼€å§‹ï¼Œä¹Ÿæœ‰å®šä¹‰æµçš„ç»“æŸã€‚æœ‰ç•Œæµå¯ä»¥åœ¨æ‘„å–æ‰€æœ‰æ•°æ®åå†è¿›è¡Œè®¡ç®—ã€‚æœ‰ç•Œæµæ‰€æœ‰æ•°æ®å¯ä»¥è¢«æ’åºï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦æœ‰åºæ‘„å–ã€‚æœ‰ç•Œæµå¤„ç†é€šå¸¸è¢«ç§°ä¸ºæ‰¹å¤„ç†
</code></pre>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/bounded-unbounded.png" alt="bounded-unbounded"></p>
<ul>
<li><strong>Apache Flink æ“…é•¿å¤„ç†æ— ç•Œå’Œæœ‰ç•Œæ•°æ®é›†</strong> ç²¾ç¡®çš„æ—¶é—´æ§åˆ¶å’ŒçŠ¶æ€åŒ–ä½¿å¾— Flink çš„è¿è¡Œæ—¶(runtime)èƒ½å¤Ÿè¿è¡Œä»»ä½•å¤„ç†æ— ç•Œæµçš„åº”ç”¨ã€‚æœ‰ç•Œæµåˆ™ç”±ä¸€äº›ä¸“ä¸ºå›ºå®šå¤§å°æ•°æ®é›†ç‰¹æ®Šè®¾è®¡çš„ç®—æ³•å’Œæ•°æ®ç»“æ„è¿›è¡Œå†…éƒ¨å¤„ç†ï¼Œäº§ç”Ÿäº†å‡ºè‰²çš„æ€§èƒ½ã€‚</li>
</ul>
<h4 id="1-2-éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹"><a href="#1-2-éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹" class="headerlink" title="1.2 éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹"></a>1.2 éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„åœ°æ–¹</h4><ul>
<li><p>Apache Flink æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå®ƒéœ€è¦è®¡ç®—èµ„æºæ¥æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚Flink é›†æˆäº†æ‰€æœ‰å¸¸è§çš„é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼Œä¾‹å¦‚ <a target="_blank" rel="noopener" href="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/YARN.html">Hadoop YARN</a>ã€ <a target="_blank" rel="noopener" href="https://mesos.apache.org/">Apache Mesos</a> å’Œ <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a>ï¼Œä½†åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹é›†ç¾¤è¿è¡Œã€‚</p>
<pre><code>    Flink è¢«è®¾è®¡ä¸ºèƒ½å¤Ÿå¾ˆå¥½åœ°å·¥ä½œåœ¨ä¸Šè¿°æ¯ä¸ªèµ„æºç®¡ç†å™¨ä¸­ï¼Œè¿™æ˜¯é€šè¿‡èµ„æºç®¡ç†å™¨ç‰¹å®š(resource-manager-specific)çš„éƒ¨ç½²æ¨¡å¼å®ç°çš„ã€‚Flink å¯ä»¥é‡‡ç”¨ä¸å½“å‰èµ„æºç®¡ç†å™¨ç›¸é€‚åº”çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚
    éƒ¨ç½² Flink åº”ç”¨ç¨‹åºæ—¶ï¼ŒFlink ä¼šæ ¹æ®åº”ç”¨ç¨‹åºé…ç½®çš„å¹¶è¡Œæ€§è‡ªåŠ¨æ ‡è¯†æ‰€éœ€çš„èµ„æºï¼Œå¹¶ä»èµ„æºç®¡ç†å™¨è¯·æ±‚è¿™äº›èµ„æºã€‚åœ¨å‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼ŒFlink é€šè¿‡è¯·æ±‚æ–°èµ„æºæ¥æ›¿æ¢å‘ç”Ÿæ•…éšœçš„å®¹å™¨ã€‚æäº¤æˆ–æ§åˆ¶åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯é€šè¿‡ REST è°ƒç”¨è¿›è¡Œçš„ï¼Œè¿™å¯ä»¥ç®€åŒ– Flink ä¸å„ç§ç¯å¢ƒä¸­çš„é›†æˆ
</code></pre>
</li>
</ul>
<h4 id="1-3-è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨"><a href="#1-3-è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨" class="headerlink" title="1.3 è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨"></a>1.3 è¿è¡Œä»»æ„è§„æ¨¡åº”ç”¨</h4><ul>
<li><p>Flink æ—¨åœ¨ä»»æ„è§„æ¨¡ä¸Šè¿è¡Œæœ‰çŠ¶æ€æµå¼åº”ç”¨ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºè¢«å¹¶è¡ŒåŒ–ä¸ºå¯èƒ½æ•°åƒä¸ªä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡åˆ†å¸ƒåœ¨é›†ç¾¤ä¸­å¹¶å‘æ‰§è¡Œã€‚æ‰€ä»¥åº”ç”¨ç¨‹åºèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æ— å°½çš„ CPUã€å†…å­˜ã€ç£ç›˜å’Œç½‘ç»œ IOã€‚è€Œä¸” Flink å¾ˆå®¹æ˜“ç»´æŠ¤éå¸¸å¤§çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å…¶å¼‚æ­¥å’Œå¢é‡çš„æ£€æŸ¥ç‚¹ç®—æ³•å¯¹å¤„ç†å»¶è¿Ÿäº§ç”Ÿæœ€å°çš„å½±å“ï¼ŒåŒæ—¶ä¿è¯ç²¾ç¡®ä¸€æ¬¡çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚</p>
<pre><code>Flink ç”¨æˆ·æŠ¥å‘Šäº†å…¶ç”Ÿäº§ç¯å¢ƒä¸­ä¸€äº›ä»¤äººå°è±¡æ·±åˆ»çš„æ‰©å±•æ€§æ•°å­—ï¼š
    æ¯å¤©å¤„ç†æ•°ä¸‡äº¿çš„äº‹ä»¶
    å¯ä»¥ç»´æŠ¤å‡ TBå¤§å°çš„çŠ¶æ€
    å¯ä»¥éƒ¨ç½²ä¸Šåƒä¸ªèŠ‚ç‚¹çš„é›†ç¾¤
</code></pre>
</li>
</ul>
<h4 id="1-4-åˆ©ç”¨å†…å­˜æ€§èƒ½"><a href="#1-4-åˆ©ç”¨å†…å­˜æ€§èƒ½" class="headerlink" title="1.4 åˆ©ç”¨å†…å­˜æ€§èƒ½"></a>1.4 åˆ©ç”¨å†…å­˜æ€§èƒ½</h4><ul>
<li>æœ‰çŠ¶æ€çš„ Flink ç¨‹åºé’ˆå¯¹æœ¬åœ°çŠ¶æ€è®¿é—®è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä»»åŠ¡çš„&#x3D;&#x3D;çŠ¶æ€å§‹ç»ˆä¿ç•™åœ¨å†…å­˜ä¸­&#x3D;&#x3D;ï¼Œå¦‚æœçŠ¶æ€å¤§å°è¶…è¿‡å¯ç”¨å†…å­˜ï¼Œåˆ™ä¼šä¿å­˜åœ¨èƒ½é«˜æ•ˆè®¿é—®çš„ç£ç›˜æ•°æ®ç»“æ„ä¸­ã€‚ä»»åŠ¡é€šè¿‡è®¿é—®æœ¬åœ°ï¼ˆé€šå¸¸åœ¨å†…å­˜ä¸­ï¼‰çŠ¶æ€æ¥è¿›è¡Œæ‰€æœ‰çš„è®¡ç®—ï¼Œä»è€Œäº§ç”Ÿéå¸¸ä½çš„å¤„ç†å»¶è¿Ÿã€‚Flink é€šè¿‡å®šæœŸå’Œå¼‚æ­¥åœ°å¯¹æœ¬åœ°çŠ¶æ€è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨æ¥ä¿è¯æ•…éšœåœºæ™¯ä¸‹ç²¾ç¡®ä¸€æ¬¡çš„çŠ¶æ€ä¸€è‡´æ€§ã€‚</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/local-state.png" alt="local-state"></p>
<h3 id="ğŸ“–-2-Flink-çš„åº”ç”¨åœºæ™¯"><a href="#ğŸ“–-2-Flink-çš„åº”ç”¨åœºæ™¯" class="headerlink" title="ğŸ“–  2. Flink çš„åº”ç”¨åœºæ™¯"></a>ğŸ“–  2. Flink çš„åº”ç”¨åœºæ™¯</h3><pre><code>    åœ¨å®é™…ç”Ÿäº§çš„è¿‡ç¨‹ä¸­ï¼Œå¤§é‡æ•°æ®åœ¨ä¸æ–­åœ°äº§ç”Ÿï¼Œä¾‹å¦‚é‡‘èäº¤æ˜“æ•°æ®ã€äº’è”ç½‘è®¢å•æ•°æ®ã€ GPS å®šä½æ•°æ®ã€ä¼ æ„Ÿå™¨ä¿¡å·ã€ç§»åŠ¨ç»ˆç«¯äº§ç”Ÿçš„æ•°æ®ã€é€šä¿¡ä¿¡å·æ•°æ®ç­‰ï¼Œä»¥åŠæˆ‘ä»¬ç†Ÿæ‚‰çš„ç½‘ç»œ æµé‡ç›‘æ§ã€æœåŠ¡å™¨äº§ç”Ÿçš„æ—¥å¿—æ•°æ®ï¼Œè¿™äº›æ•°æ®æœ€å¤§çš„å…±åŒç‚¹å°±æ˜¯å®æ—¶ä»ä¸åŒçš„æ•°æ®æºä¸­äº§ç”Ÿï¼Œ ç„¶åå†ä¼ è¾“åˆ°ä¸‹æ¸¸çš„åˆ†æç³»ç»Ÿã€‚é’ˆå¯¹è¿™äº›æ•°æ®ç±»å‹ä¸»è¦åŒ…æ‹¬å®æ—¶æ™ºèƒ½æ¨èã€å¤æ‚äº‹ä»¶å¤„ç†ã€ å®æ—¶æ¬ºè¯ˆæ£€æµ‹ã€å®æ—¶æ•°ä»“ä¸ ETL ç±»å‹ã€æµæ•°æ®åˆ†æç±»å‹ã€å®æ—¶æŠ¥è¡¨ç±»å‹ç­‰å®æ—¶ä¸šåŠ¡åœºæ™¯ï¼Œè€Œ Flink å¯¹äºè¿™äº›ç±»å‹çš„åœºæ™¯éƒ½æœ‰ç€éå¸¸å¥½çš„æ”¯æŒã€‚
</code></pre>
<ul>
<li><p>1ã€å®æ—¶æ™ºèƒ½æ¨è</p>
<pre><code>    æ™ºèƒ½æ¨èä¼šæ ¹æ®ç”¨æˆ·å†å²çš„è´­ä¹°è¡Œä¸ºï¼Œé€šè¿‡æ¨èç®—æ³•è®­ç»ƒæ¨¡å‹ï¼Œé¢„æµ‹ç”¨æˆ·æœªæ¥å¯èƒ½ä¼šè´­ ä¹°çš„ç‰©å“ã€‚å¯¹ä¸ªäººæ¥è¯´ï¼Œæ¨èç³»ç»Ÿèµ·ç€ä¿¡æ¯è¿‡æ»¤çš„ä½œç”¨ï¼Œå¯¹ Web/App æœåŠ¡ç«¯æ¥è¯´ï¼Œæ¨èç³»ç»Ÿ èµ·ç€æ»¡è¶³ç”¨æˆ·ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œæå‡ç”¨æˆ·æ»¡æ„åº¦çš„ä½œç”¨ã€‚æ¨èç³»ç»Ÿæœ¬èº«ä¹Ÿåœ¨é£é€Ÿå‘å±•ï¼Œé™¤äº†ç®—æ³• è¶Šæ¥è¶Šå®Œå–„ï¼Œå¯¹æ—¶å»¶çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šè‹›åˆ»å’Œå®æ—¶åŒ–ã€‚åˆ©ç”¨ Flink æµè®¡ç®—å¸®åŠ©ç”¨æˆ·æ„å»ºæ›´åŠ å® æ—¶çš„æ™ºèƒ½æ¨èç³»ç»Ÿï¼Œå¯¹ç”¨æˆ·è¡Œä¸ºæŒ‡æ ‡è¿›è¡Œå®æ—¶è®¡ç®—ï¼Œå¯¹æ¨¡å‹è¿›è¡Œå®æ—¶æ›´æ–°ï¼Œå¯¹ç”¨æˆ·æŒ‡æ ‡è¿›è¡Œ å®æ—¶é¢„æµ‹ï¼Œå¹¶å°†é¢„æµ‹çš„ä¿¡æ¯æ¨é€ç»™ Wep/App ç«¯ï¼Œå¸®åŠ©ç”¨æˆ·è·å–æƒ³è¦çš„å•†å“ä¿¡æ¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿ å¸®åŠ©ä¼ä¸šæå‡é”€å”®é¢ï¼Œåˆ›é€ æ›´å¤§çš„å•†ä¸šä»·å€¼ã€‚
</code></pre>
</li>
<li><p>2ã€å¤æ‚äº‹ä»¶å¤„ç†</p>
<pre><code>    å¯¹äºå¤æ‚äº‹ä»¶å¤„ç†ï¼Œæ¯”è¾ƒå¸¸è§çš„æ¡ˆä¾‹ä¸»è¦é›†ä¸­äºå·¥ä¸šé¢†åŸŸï¼Œä¾‹å¦‚å¯¹è½¦è½½ä¼ æ„Ÿå™¨ã€æœºæ¢°è®¾ å¤‡ç­‰å®æ—¶æ•…éšœæ£€æµ‹ï¼Œè¿™äº›ä¸šåŠ¡ç±»å‹é€šå¸¸æ•°æ®é‡éƒ½éå¸¸å¤§ï¼Œä¸”å¯¹æ•°æ®å¤„ç†çš„æ—¶æ•ˆæ€§è¦æ±‚éå¸¸é«˜ã€‚ é€šè¿‡åˆ©ç”¨ Flink æä¾›çš„ CEPï¼ˆå¤æ‚äº‹ä»¶å¤„ç†ï¼‰è¿›è¡Œäº‹ä»¶æ¨¡å¼çš„æŠ½å–ï¼ŒåŒæ—¶åº”ç”¨ Flink çš„ Sql è¿›è¡Œäº‹ä»¶æ•°æ®çš„è½¬æ¢ï¼Œåœ¨æµå¼ç³»ç»Ÿä¸­æ„å»ºå®æ—¶è§„åˆ™å¼•æ“ï¼Œä¸€æ—¦äº‹ä»¶è§¦å‘æŠ¥è­¦è§„åˆ™ï¼Œä¾¿ç«‹å³å°† å‘Šè­¦ç»“æœä¼ è¾“è‡³ä¸‹æ¸¸é€šçŸ¥ç³»ç»Ÿï¼Œä»è€Œå®ç°å¯¹è®¾å¤‡æ•…éšœå¿«é€Ÿé¢„è­¦ç›‘æµ‹ï¼Œè½¦è¾†çŠ¶æ€ç›‘æ§ç­‰ç›®çš„ã€‚
</code></pre>
</li>
<li><p>3ã€å®æ—¶æ¬ºè¯ˆæ£€æµ‹</p>
<pre><code>    åœ¨é‡‘èé¢†åŸŸçš„ä¸šåŠ¡ä¸­ï¼Œå¸¸å¸¸å‡ºç°å„ç§ç±»å‹çš„æ¬ºè¯ˆè¡Œä¸ºï¼Œä¾‹å¦‚ä¿¡ç”¨å¡æ¬ºè¯ˆã€ä¿¡è´·ç”³è¯·æ¬ºè¯ˆç­‰ï¼Œè€Œå¦‚ä½•ä¿è¯ç”¨æˆ·å’Œå…¬å¸çš„èµ„é‡‘å®‰å…¨ï¼Œæ˜¯æ¥è¿‘å¹´æ¥è®¸å¤šé‡‘èå…¬å¸åŠé“¶è¡Œå…±åŒé¢å¯¹çš„æŒ‘æˆ˜ã€‚ éšç€ä¸æ³•åˆ†å­æ¬ºè¯ˆæ‰‹æ®µçš„ä¸æ–­å‡çº§ï¼Œä¼ ç»Ÿçš„åæ¬ºè¯ˆæ‰‹æ®µå·²ç»ä¸è¶³ä»¥è§£å†³ç›®å‰æ‰€é¢ä¸´çš„é—®é¢˜ã€‚ ä»¥å¾€å¯èƒ½éœ€è¦å‡ ä¸ªå°æ—¶æ‰èƒ½é€šè¿‡äº¤æ˜“æ•°æ®è®¡ç®—å‡ºç”¨æˆ·çš„è¡Œä¸ºæŒ‡æ ‡ï¼Œç„¶åé€šè¿‡è§„åˆ™åˆ¤åˆ«å‡ºå…·æœ‰ æ¬ºè¯ˆè¡Œä¸ºå«Œç–‘çš„ç”¨æˆ·ï¼Œå†è¿›è¡Œæ¡ˆä»¶è°ƒæŸ¥å¤„ç†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹èµ„é‡‘å¯èƒ½æ—©å·²è¢«ä¸æ³•åˆ†å­è½¬ç§»ï¼Œ ä»è€Œç»™ä¼ä¸šå’Œç”¨æˆ·é€ æˆå¤§é‡çš„ç»æµæŸå¤±ã€‚è€Œè¿ç”¨ Flink æµå¼è®¡ç®—æŠ€æœ¯èƒ½å¤Ÿåœ¨æ¯«ç§’å†…å°±å®Œæˆå¯¹ æ¬ºè¯ˆåˆ¤æ–­è¡Œä¸ºæŒ‡æ ‡çš„è®¡ç®—ï¼Œç„¶åå®æ—¶å¯¹äº¤æ˜“æµæ°´è¿›è¡Œè§„åˆ™åˆ¤æ–­æˆ–è€…æ¨¡å‹é¢„æµ‹ï¼Œè¿™æ ·ä¸€æ—¦æ£€æµ‹ å‡ºäº¤æ˜“ä¸­å­˜åœ¨æ¬ºè¯ˆå«Œç–‘ï¼Œåˆ™ç›´æ¥å¯¹äº¤æ˜“è¿›è¡Œå®æ—¶æ‹¦æˆªï¼Œé¿å…å› ä¸ºå¤„ç†ä¸åŠæ—¶è€Œå¯¼è‡´çš„ç»æµæŸå¤±ã€‚
</code></pre>
</li>
<li><p>4ã€å®æ—¶æ•°ä»“ä¸ ETL</p>
<pre><code>    ç»“åˆç¦»çº¿æ•°ä»“ï¼Œé€šè¿‡åˆ©ç”¨æµè®¡ç®—è¯¸å¤šä¼˜åŠ¿å’Œ SQL çµæ´»çš„åŠ å·¥èƒ½åŠ›ï¼Œå¯¹æµå¼æ•°æ®è¿›è¡Œå®æ—¶ æ¸…æ´—ã€å½’å¹¶ã€ç»“æ„åŒ–å¤„ç†ï¼Œä¸ºç¦»çº¿æ•°ä»“è¿›è¡Œè¡¥å……å’Œä¼˜åŒ–ã€‚å¦ä¸€æ–¹é¢ç»“åˆå®æ—¶æ•°æ® ETL å¤„ç†èƒ½åŠ›ï¼Œåˆ©ç”¨æœ‰çŠ¶æ€æµå¼è®¡ç®—æŠ€æœ¯ï¼Œå¯ä»¥å°½å¯èƒ½é™ä½ä¼ä¸šç”±äºåœ¨ç¦»çº¿æ•°æ®è®¡ç®—è¿‡ç¨‹ä¸­è°ƒåº¦é€»è¾‘çš„ å¤æ‚åº¦ï¼Œé«˜æ•ˆå¿«é€Ÿåœ°å¤„ç†ä¼ä¸šéœ€è¦çš„ç»Ÿè®¡ç»“æœï¼Œå¸®åŠ©ä¼ä¸šæ›´å¥½åœ°åº”ç”¨å®æ—¶æ•°æ®æ‰€åˆ†æå‡ºæ¥çš„ç»“æœã€‚
</code></pre>
</li>
<li><p>5ã€æµæ•°æ®åˆ†æ</p>
<pre><code>    å®æ—¶è®¡ç®—å„ç±»æ•°æ®æŒ‡æ ‡ï¼Œå¹¶åˆ©ç”¨å®æ—¶ç»“æœåŠæ—¶è°ƒæ•´åœ¨çº¿ç³»ç»Ÿç›¸å…³ç­–ç•¥ï¼Œåœ¨å„ç±»å†…å®¹æŠ•æ”¾ã€ æ— çº¿æ™ºèƒ½æ¨é€é¢†åŸŸæœ‰å¤§é‡çš„åº”ç”¨ã€‚æµå¼è®¡ç®—æŠ€æœ¯å°†æ•°æ®åˆ†æåœºæ™¯å®æ—¶åŒ–ï¼Œå¸®åŠ©ä¼ä¸šåšåˆ°å®æ—¶åŒ–åˆ†æ Web åº”ç”¨æˆ–è€… App åº”ç”¨çš„å„é¡¹æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ App ç‰ˆæœ¬åˆ†å¸ƒæƒ…å†µã€Crash æ£€æµ‹å’Œåˆ†å¸ƒç­‰ï¼Œ åŒæ—¶æä¾›å¤šç»´åº¦ç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œæ”¯æŒæ—¥å¿—è‡ªä¸»åˆ†æï¼ŒåŠ©åŠ›å¼€å‘è€…å®ç°åŸºäºå¤§æ•°æ®æŠ€æœ¯çš„ç²¾ç»† åŒ–è¿è¥ã€æå‡äº§å“è´¨é‡å’Œä½“éªŒã€å¢å¼ºç”¨æˆ·é»æ€§ã€‚
</code></pre>
</li>
<li><p>6ã€å®æ—¶æŠ¥è¡¨åˆ†æ</p>
<pre><code>    å®æ—¶æŠ¥è¡¨åˆ†ææ˜¯è¿‘å¹´æ¥å¾ˆå¤šå…¬å¸é‡‡ç”¨çš„æŠ¥è¡¨ç»Ÿè®¡æ–¹æ¡ˆä¹‹ä¸€ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„åº”ç”¨ä¾¿æ˜¯å®æ—¶ å¤§å±å±•ç¤ºã€‚åˆ©ç”¨æµå¼è®¡ç®—å®æ—¶å¾—å‡ºçš„ç»“æœç›´æ¥è¢«æ¨é€åˆ°å‰ç«¯åº”ç”¨ï¼Œå®æ—¶æ˜¾ç¤ºå‡ºé‡è¦æŒ‡æ ‡çš„å˜ æ¢æƒ…å†µã€‚æœ€å…¸å‹çš„æ¡ˆä¾‹ä¾¿æ˜¯æ·˜å®çš„åŒåä¸€æ´»åŠ¨ï¼Œæ¯å¹´åŒåä¸€è´­ç‰©èŠ‚ï¼Œé™¤ç–¯ç‹‚è´­ç‰©å¤–ï¼Œæœ€å¼•äºº æ³¨ç›®çš„å°±æ˜¯å¤©çŒ«åŒåä¸€å¤§å±ä¸åœè·³è·ƒçš„æˆäº¤æ€»é¢ã€‚åœ¨æ•´ä¸ªè®¡ç®—é“¾è·¯ä¸­åŒ…æ‹¬ä»å¤©çŒ«äº¤æ˜“ä¸‹å•è´­ ä¹°åˆ°æ•°æ®é‡‡é›†ã€æ•°æ®è®¡ç®—ã€æ•°æ®æ ¡éªŒï¼Œæœ€ç»ˆè½åˆ°åŒåä¸€å¤§å±ä¸Šå±•ç°çš„å…¨é“¾è·¯æ—¶é—´å‹ç¼©åœ¨ 5 ç§’ä»¥å†…ï¼Œé¡¶å³°è®¡ç®—æ€§èƒ½é«˜è¾¾æ•°ä¸‰åä¸‡ç¬”è®¢å•/ç§’ï¼Œé€šè¿‡å¤šæ¡é“¾è·¯æµè®¡ç®—å¤‡ä»½ç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚ è€Œåœ¨å…¶ä»–è¡Œä¸šï¼Œä¼ä¸šä¹Ÿåœ¨æ„å»ºè‡ªå·±çš„å®æ—¶æŠ¥è¡¨ç³»ç»Ÿï¼Œè®©ä¼ä¸šèƒ½å¤Ÿä¾æ‰˜äºè‡ªèº«çš„ä¸šåŠ¡æ•°æ®ï¼Œå¿«é€Ÿæå–å‡ºæ›´å¤šçš„æ•°æ®ä»·å€¼ï¼Œä»è€Œæ›´å¥½åœ°æœåŠ¡äºä¼ä¸šè¿è¡Œè¿‡ç¨‹ä¸­ã€‚
</code></pre>
</li>
</ul>
<h3 id="ğŸ“–-3-FlinkåŸºæœ¬æŠ€æœ¯æ ˆ"><a href="#ğŸ“–-3-FlinkåŸºæœ¬æŠ€æœ¯æ ˆ" class="headerlink" title="ğŸ“–  3.  FlinkåŸºæœ¬æŠ€æœ¯æ ˆ"></a>ğŸ“–  3.  FlinkåŸºæœ¬æŠ€æœ¯æ ˆ</h3><p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1563615522100.png" alt="1563615522100"></p>
<blockquote>
<p>åœ¨flinkæ•´ä¸ªè½¯ä»¶æ¶æ„ä½“ç³»ä¸­ã€‚åŒæ ·éµå¾ªç€åˆ†å±‚çš„æ¶æ„è®¾è®¡ç†å¿µï¼Œåœ¨é™ä½ç³»ç»Ÿè€¦åˆåº¦çš„åŒæ—¶ï¼Œä¹Ÿä¸ºä¸Šå±‚ç”¨æˆ·æ„å»ºflinkåº”ç”¨æä¾›äº†ä¸°å¯Œä¸”å‹å¥½çš„æ¥å£ã€‚</p>
</blockquote>
<ul>
<li><input disabled type="checkbox"> &#x3D;&#x3D;API &amp; librarieså±‚&#x3D;&#x3D;</li>
</ul>
<pre><code>    ä½œä¸ºåˆ†å¸ƒå¼æ•°æ®å¤„ç†æ¡†æ¶ï¼ŒfinkåŒæ—¶æä¾›äº†æ”¯æ’‘æµè®¡ç®—å’Œæ‰¹è®¡ç®—çš„æ¥å£ï¼ŒåŒæ—¶åœ¨æ­¤åŸºç¡€ä¹‹ä¸ŠæŠ½è±¡å‡ºä¸åŒçš„åº”ç”¨ç±»å‹çš„ç»„ä»¶åº“ã€‚
å¦‚ï¼šåŸºäºæµå¤„ç†çš„CEPï¼ˆå¤æ‚äº‹ä»¶å¤„ç†åº“ï¼‰ã€SQL&amp;Tableåº“ã€FlinkML(æœºå™¨å­¦ä¹ åº“)ã€Gelly(å›¾å¤„ç†åº“)
æœ‰æµå¼å¤„ç†APIï¼Œæ‰¹å¤„ç†APIã€‚æµå¼å¤„ç†çš„æ”¯æŒäº‹ä»¶å¤„ç†ï¼Œè¡¨æ“ä½œã€‚æ‰¹å¤„ç†çš„ï¼Œæ”¯æŒæœºå™¨å­¦ä¹ ï¼Œå›¾è®¡ç®—ï¼Œä¹Ÿæ”¯æŒè¡¨æ“ä½œã€‚
</code></pre>
<ul>
<li><input disabled type="checkbox"> &#x3D;&#x3D;Runtimeæ ¸å¿ƒå±‚&#x3D;&#x3D;</li>
</ul>
<pre><code>    è¯¥å±‚ä¸»è¦è´Ÿè´£å¯¹ä¸Šå±‚çš„æ¥å£æä¾›åŸºç¡€æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯flinkåˆ†å¸ƒå¼è®¡ç®—çš„æ ¸å¿ƒå®ç°ã€‚flinkåº•å±‚çš„æ‰§è¡Œå¼•æ“ã€‚
</code></pre>
<ul>
<li><input disabled type="checkbox"> &#x3D;&#x3D;ç‰©ç†éƒ¨ç½²å±‚&#x3D;&#x3D;</li>
</ul>
<pre><code>è¯¥å±‚ä¸»è¦æ¶‰åŠåˆ°flinkçš„éƒ¨ç½²æ¨¡å¼ï¼Œç›®å‰flinkæ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼ï¼š
æœ¬åœ° local
é›†ç¾¤ standalone/yarn
äº‘ GCE/EC2  è°·æ­Œäº‘ã€äºšé©¬é€Šäº‘
kubenetes
</code></pre>
<h3 id="ğŸ“–-4-FlinkåŸºæœ¬æ¶æ„"><a href="#ğŸ“–-4-FlinkåŸºæœ¬æ¶æ„" class="headerlink" title="ğŸ“–  4. FlinkåŸºæœ¬æ¶æ„"></a>ğŸ“–  4. FlinkåŸºæœ¬æ¶æ„</h3><p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/flink%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86.png" alt="flinkè¿è¡ŒåŸç†"></p>
<p>â€‹	Flink æ•´ä¸ªç³»ç»Ÿä¸»è¦ç”±ä¸¤ä¸ªç»„ä»¶ç»„æˆï¼Œåˆ†åˆ«ä¸º JobManager å’Œ TaskManagerï¼ŒFlink æ¶æ„ä¹Ÿéµå¾ª Master-Slave æ¶æ„è®¾è®¡åŸåˆ™ï¼ŒJobManager ä¸º Master èŠ‚ç‚¹ï¼ŒTaskManager ä¸º Workerï¼ˆSlaveï¼‰èŠ‚ç‚¹ã€‚æ‰€æœ‰ç»„ä»¶ä¹‹é—´çš„é€šä¿¡éƒ½æ˜¯å€ŸåŠ©äº Akka Frameworkï¼ŒåŒ…æ‹¬ä»»åŠ¡çš„çŠ¶æ€ä»¥åŠ Checkpoint è§¦å‘ç­‰ä¿¡æ¯</p>
<ul>
<li><p><strong>Client</strong> </p>
<pre><code>    å®¢æˆ·ç«¯è´Ÿè´£å°†ä»»åŠ¡æäº¤åˆ°é›†ç¾¤ï¼Œä¸ JobManager æ„å»º Akka è¿æ¥ï¼Œç„¶åå°†ä»»åŠ¡æäº¤JobManagerï¼Œé€šè¿‡å’Œ JobManager ä¹‹é—´è¿›è¡Œäº¤äº’è·å–ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ã€‚å®¢æˆ·ç«¯æäº¤ä»»åŠ¡å¯ä»¥é‡‡ç”¨CLI æ–¹å¼æˆ–è€…é€šè¿‡ä½¿ç”¨ Flink WebUI æäº¤ï¼Œä¹Ÿå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æŒ‡å®š JobManager çš„ RPC ç½‘ç»œç«¯å£æ„å»º ExecutionEnvironment æäº¤ Flink åº”ç”¨ã€‚
</code></pre>
</li>
<li><p><strong>JobManager</strong> </p>
<pre><code>    JobManager è´Ÿè´£æ•´ä¸ª Flink é›†ç¾¤ä»»åŠ¡çš„è°ƒåº¦ä»¥åŠèµ„æºçš„ç®¡ç†ï¼Œä»å®¢æˆ·ç«¯ä¸­è·å–æäº¤çš„åº”ç”¨ï¼Œç„¶åæ ¹æ®é›†ç¾¤ä¸­ TaskManager ä¸Š TaskSlot çš„ä½¿ç”¨æƒ…å†µï¼Œä¸ºæäº¤çš„åº”ç”¨åˆ†é…ç›¸åº”çš„ TaskSlot èµ„æºå¹¶å‘½ä»¤ TaskManager å¯åŠ¨ä»å®¢æˆ·ç«¯ä¸­è·å–çš„åº”ç”¨ã€‚
    
    JobManager ç›¸å½“äºæ•´ä¸ªé›†ç¾¤çš„ Master èŠ‚ç‚¹ï¼Œä¸”æ•´ä¸ªé›†ç¾¤æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ´»è·ƒçš„ JobManager ï¼Œè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡ç®¡ç†å’Œèµ„æºç®¡ç†ã€‚
    
    JobManager å’Œ TaskManager ä¹‹é—´é€šè¿‡ Actor System è¿›è¡Œé€šä¿¡ï¼Œè·å–ä»»åŠ¡æ‰§è¡Œçš„æƒ…å†µå¹¶é€šè¿‡ Actor System å°†åº”ç”¨çš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µå‘é€ç»™å®¢æˆ·ç«¯ã€‚åŒæ—¶åœ¨ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒFlink JobManager ä¼šè§¦å‘ Checkpoint æ“ä½œï¼Œæ¯ä¸ª TaskManager èŠ‚ç‚¹ æ”¶åˆ° Checkpoint è§¦å‘æŒ‡ä»¤åï¼Œå®Œæˆ Checkpoint æ“ä½œï¼Œæ‰€æœ‰çš„ Checkpoint åè°ƒè¿‡ç¨‹éƒ½æ˜¯åœ¨ Fink JobManager ä¸­å®Œæˆã€‚
    
    å½“ä»»åŠ¡å®Œæˆåï¼ŒFlink ä¼šå°†ä»»åŠ¡æ‰§è¡Œçš„ä¿¡æ¯åé¦ˆç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰ TaskManager ä¸­çš„èµ„æºä»¥ä¾›ä¸‹ä¸€æ¬¡æäº¤ä»»åŠ¡ä½¿ç”¨ã€‚
</code></pre>
</li>
<li><p><strong>TaskManager</strong> </p>
<pre><code>    TaskManager ç›¸å½“äºæ•´ä¸ªé›†ç¾¤çš„ Slave èŠ‚ç‚¹ï¼Œè´Ÿè´£å…·ä½“çš„ä»»åŠ¡æ‰§è¡Œå’Œå¯¹åº”ä»»åŠ¡åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„èµ„æºç”³è¯·å’Œç®¡ç†ã€‚å®¢æˆ·ç«¯é€šè¿‡å°†ç¼–å†™å¥½çš„ Flink åº”ç”¨ç¼–è¯‘æ‰“åŒ…ï¼Œæäº¤åˆ° JobManagerï¼Œç„¶å JobManager ä¼šæ ¹æ®å·²æ³¨å†Œåœ¨ JobManager ä¸­ TaskManager çš„èµ„æºæƒ…å†µï¼Œå°†ä»»åŠ¡åˆ†é…ç»™æœ‰èµ„æºçš„ TaskManagerèŠ‚ç‚¹ï¼Œç„¶åå¯åŠ¨å¹¶è¿è¡Œä»»åŠ¡ã€‚
    TaskManager ä» JobManager æ¥æ”¶éœ€è¦éƒ¨ç½²çš„ä»»åŠ¡ï¼Œç„¶åä½¿ç”¨ Slot èµ„æºå¯åŠ¨ Taskï¼Œå»ºç«‹æ•°æ®æ¥å…¥çš„ç½‘ç»œè¿æ¥ï¼Œæ¥æ”¶æ•°æ®å¹¶å¼€å§‹æ•°æ®å¤„ç†ã€‚åŒæ—¶ TaskManager ä¹‹é—´çš„æ•°æ®äº¤äº’éƒ½æ˜¯é€šè¿‡æ•°æ®æµçš„æ–¹å¼è¿›è¡Œçš„ã€‚
    å¯ä»¥çœ‹å‡ºï¼ŒFlink çš„ä»»åŠ¡è¿è¡Œå…¶å®æ˜¯é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼ï¼Œè¿™å’Œ MapReduce å¤š JVM è¿›è¡Œçš„æ–¹å¼æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼ŒFlink èƒ½å¤Ÿæå¤§æé«˜ CPU ä½¿ç”¨æ•ˆç‡ï¼Œåœ¨å¤šä¸ªä»»åŠ¡å’Œ Task ä¹‹é—´é€šè¿‡ TaskSlot æ–¹å¼å…±äº«ç³»ç»Ÿèµ„æºï¼Œæ¯ä¸ª TaskManager ä¸­é€šè¿‡ç®¡ç†å¤šä¸ª TaskSlot èµ„æºæ± è¿›è¡Œå¯¹èµ„æºè¿›è¡Œæœ‰æ•ˆç®¡ç†ã€‚
</code></pre>
</li>
</ul>
<h3 id="ğŸ“–-5-Flinkçš„æºç ç¼–è¯‘ï¼ˆäº†è§£ï¼‰"><a href="#ğŸ“–-5-Flinkçš„æºç ç¼–è¯‘ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ğŸ“–  5.  Flinkçš„æºç ç¼–è¯‘ï¼ˆäº†è§£ï¼‰"></a>ğŸ“–  5.  Flinkçš„æºç ç¼–è¯‘ï¼ˆäº†è§£ï¼‰</h3><ul>
<li><p>æˆ‘ä»¬å¯ä»¥å¯¹flinkçš„æºç è¿›è¡Œç¼–è¯‘ï¼Œæ–¹ä¾¿å¯¹æˆ‘ä»¬å„ç§hadoopçš„ç‰ˆæœ¬è¿›è¡Œé€‚é…</p>
</li>
<li><p>å‚è§ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/h335146502/article/details/96483310">https://blog.csdn.net/h335146502/article/details/96483310</a></p>
</li>
</ul>
<pre><code class="shell">cd /kkb/soft
ç¼–è¯‘flink-shadedåŒ…
wget  https://github.com/apache/flink-shaded/archive/release-7.0.tar.gz
tar -zxvf flink-shaded-release-7.0.tar.gz -C /kkb/install/
cd /kkb/install/flink-shaded-release-7.0/
mvn clean install -DskipTests -Dhadoop.version=2.6.0-cdh5.14.2

ç¼–è¯‘flinkæºç 
wget http://archive.apache.org/dist/flink/flink-1.9.2/flink-1.9.2-src.tgz

tar -zxf flink-1.9.2-src.tgz -C /kkb/install/
cd /kkb/install/flink-1.9.2/
mvn -T2C clean install -DskipTests -Dfast -Pinclude-hadoop -Pvendor-repos -Dhadoop.version=2.6.0-cdh5.14.2
</code></pre>
<h3 id="ğŸ“–-6-Localæ¨¡å¼å®‰è£…"><a href="#ğŸ“–-6-Localæ¨¡å¼å®‰è£…" class="headerlink" title="ğŸ“–  6.  Localæ¨¡å¼å®‰è£…"></a>ğŸ“–  6.  Localæ¨¡å¼å®‰è£…</h3><ul>
<li><p>1ã€å®‰è£…jdkï¼Œé…ç½®JAVA_HOMEï¼Œå»ºè®®ä½¿ç”¨jdk1.8ä»¥ä¸Š</p>
</li>
<li><p>2ã€å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/apache/flink/flink-1.9.2/flink-1.9.2-bin-scala_2.11.tgz">https://mirrors.tuna.tsinghua.edu.cn/apache/flink/flink-1.9.2/flink-1.9.2-bin-scala_2.11.tgz</a></p>
</li>
<li><p>3ã€ç›´æ¥ä¸Šä¼ å®‰è£…åŒ…åˆ°æœåŠ¡å™¨</p>
</li>
<li><p>4ã€è§£å‹å®‰è£…åŒ…å¹¶é…ç½®ç¯å¢ƒå˜é‡</p>
<pre><code class="shell">tar -zxf flink-1.9.2-bin-scala_2.11.tgz -C /kkb/install/

é…ç½®ç¯å¢ƒå˜é‡
sudo vim /etc/profile
export FLINK_HOME=/kkb/install/flink-1.9.2
export PATH=:$FLINK_HOME/bin:$PATH
</code></pre>
</li>
<li><p>5ã€å¯åŠ¨æœåŠ¡</p>
<ul>
<li><p>localæ¨¡å¼ï¼Œä»€ä¹ˆé…ç½®é¡¹éƒ½ä¸éœ€è¦é…ï¼Œç›´æ¥å¯åŠ¨æœåŠ¡å™¨å³å¯</p>
<pre><code class="shell">cd /kkb/install/flink-1.9.2
#å¯åŠ¨flink
bin/start-cluster.sh 
#åœæ­¢flink
bin/stop-cluster.sh 
</code></pre>
</li>
</ul>
</li>
<li><p>6ã€Webé¡µé¢æµè§ˆ</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://node01:8081/#/overview">http://node01:8081/#/overview</a></li>
</ul>
</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1587549790710.png" alt="1587549790710"></p>
<h3 id="ğŸ“–-7-Standaloneæ¨¡å¼å®‰è£…"><a href="#ğŸ“–-7-Standaloneæ¨¡å¼å®‰è£…" class="headerlink" title="ğŸ“–  7. Standaloneæ¨¡å¼å®‰è£…"></a>ğŸ“–  7. Standaloneæ¨¡å¼å®‰è£…</h3><ul>
<li>ï¼ˆ1ï¼‰é›†ç¾¤è§„åˆ’</li>
</ul>
<table>
<thead>
<tr>
<th align="left">ä¸»æœºå</th>
<th align="right">JobManager</th>
<th align="center">TaskManager</th>
</tr>
</thead>
<tbody><tr>
<td align="left">node01</td>
<td align="right">æ˜¯</td>
<td align="center">æ˜¯</td>
</tr>
<tr>
<td align="left">node02</td>
<td align="right">æ˜¯</td>
<td align="center">æ˜¯</td>
</tr>
<tr>
<td align="left">node03</td>
<td align="right"></td>
<td align="center">æ˜¯</td>
</tr>
</tbody></table>
<ul>
<li><p>ï¼ˆ2ï¼‰ä¾èµ– </p>
<ul>
<li>jdk1.8ä»¥ä¸Šï¼Œé…ç½®JAVA_HOME</li>
<li>ä¸»æœºä¹‹é—´å…å¯†ç </li>
</ul>
</li>
<li><p>ï¼ˆ3ï¼‰å®‰è£…æ­¥éª¤</p>
</li>
</ul>
<pre><code class="shell">node01ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶

(a) ä¿®æ”¹conf/flink-conf.yaml

#jobmanageråœ°å€
jobmanager.rpc.address: node01
#ä½¿ç”¨zookeeperæ­å»ºé«˜å¯ç”¨
high-availability: zookeeper
##å­˜å‚¨JobManagerçš„å…ƒæ•°æ®åˆ°HDFS
high-availability.storageDir: hdfs://node01:8020/flink
high-availability.zookeeper.quorum: node01:2181,node02:2181,node03:2181


(b) ä¿®æ”¹conf/slaves
node01
node02
node03

(c) ä¿®æ”¹conf/masters
node01:8081
node02:8081


(d)ä¸Šä¼ flink-shaded-hadoop-2-uber-2.7.5-10.0.jaråˆ°flinkçš„libç›®å½•ä¸‹
å°†flink-shaded-hadoop-2-uber-2.7.5-10.0.jar è¿™ä¸ªjaråŒ…ä¸Šä¼ åˆ°flinkçš„å®‰è£…ç›®å½•çš„libä¸‹


(e) æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹
scp -r /kkb/install/flink-1.9.2 node02:/kkb/install
scp -r /kkb/install/flink-1.9.2 node03:/kkb/install


(f)ï¼šnode01(JobMananger)èŠ‚ç‚¹å¯åŠ¨
æ³¨æ„ï¼šå¯åŠ¨ä¹‹å‰å…ˆå¯åŠ¨hadoopå’Œzookeeperé›†ç¾¤
cd /kkb/install/flink-1.9.2
bin/start-cluster.sh

(g)ï¼šè®¿é—®
http://node01:8081
http://node02:8081

(h)ï¼šå…³é—­flinké›†ç¾¤, åœ¨ä¸»èŠ‚ç‚¹ä¸Šæ‰§è¡Œ
cd /kkb/install/flink-1.9.2
bin/stop-cluster.sh
</code></pre>
<ul>
<li>(4) StandAloneæ¨¡å¼éœ€è¦è€ƒè™‘çš„å‚æ•°</li>
</ul>
<pre><code>jobmanager.heap.mbï¼š     		jobmanagerèŠ‚ç‚¹å¯ç”¨çš„å†…å­˜å¤§å°
taskmanager.heap.mbï¼š    		taskmanagerèŠ‚ç‚¹å¯ç”¨çš„å†…å­˜å¤§å°
taskmanager.numberOfTaskSlotsï¼š   æ¯å°taskmanagerèŠ‚ç‚¹å¯ç”¨çš„cpuæ•°é‡
parallelism.defaultï¼š             é»˜è®¤æƒ…å†µä¸‹ä»»åŠ¡çš„å¹¶è¡Œåº¦
taskmanager.tmp.dirsï¼š            taskmanagerçš„ä¸´æ—¶æ•°æ®å­˜å‚¨ç›®å½•
</code></pre>
<h3 id="ğŸ“–-8-Flink-on-Yarnæ¨¡å¼å®‰è£…"><a href="#ğŸ“–-8-Flink-on-Yarnæ¨¡å¼å®‰è£…" class="headerlink" title="ğŸ“–  8. Flink on Yarnæ¨¡å¼å®‰è£…"></a>ğŸ“–  8. Flink on Yarnæ¨¡å¼å®‰è£…</h3><ol>
<li>é¦–å…ˆå®‰è£…å¥½Hadoopï¼ˆyarnï¼‰</li>
<li>ä¸Šä¼ ä¸€ä¸ªflinkçš„åŒ…ï¼Œé…ç½®å¥½hadoopçš„ç¯å¢ƒå˜é‡å°±å¯ä»¥äº†</li>
</ol>
<ul>
<li>flink on yarnæœ‰ä¸¤ç§æ–¹å¼</li>
</ul>
<h4 id="8-1-ç¬¬ä¸€ç§æ–¹å¼"><a href="#8-1-ç¬¬ä¸€ç§æ–¹å¼" class="headerlink" title="8.1 ç¬¬ä¸€ç§æ–¹å¼"></a>8.1 ç¬¬ä¸€ç§æ–¹å¼</h4><ul>
<li><p>å†…å­˜é›†ä¸­ç®¡ç†æ¨¡å¼ï¼ˆ&#x3D;&#x3D;Yarn Session&#x3D;&#x3D;ï¼‰</p>
<ul>
<li>åœ¨Yarnä¸­åˆå§‹åŒ–ä¸€ä¸ªFlinké›†ç¾¤ï¼Œå¼€è¾ŸæŒ‡å®šçš„èµ„æºï¼Œä¹‹åæˆ‘ä»¬æäº¤çš„Flink Jonéƒ½åœ¨è¿™ä¸ªFlink yarn-sessionä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡æäº¤å¤šå°‘ä¸ªjobï¼Œè¿™äº›jobéƒ½ä¼šå…±ç”¨å¼€å§‹æ—¶åœ¨yarnä¸­ç”³è¯·çš„èµ„æºã€‚è¿™ä¸ªFlinké›†ç¾¤ä¼šå¸¸é©»åœ¨Yarné›†ç¾¤ä¸­ï¼Œé™¤éæ‰‹åŠ¨åœæ­¢ã€‚</li>
</ul>
</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/yarn-session.png" alt="1587522616288"></p>
<h4 id="8-2-ç¬¬äºŒç§æ–¹å¼"><a href="#8-2-ç¬¬äºŒç§æ–¹å¼" class="headerlink" title="8.2 ç¬¬äºŒç§æ–¹å¼"></a>8.2 ç¬¬äºŒç§æ–¹å¼</h4><ul>
<li>å†…å­˜Jobç®¡ç†æ¨¡å¼&#x3D;&#x3D;ã€yarn-cluster æ¨èä½¿ç”¨ã€‘&#x3D;&#x3D;<ul>
<li>åœ¨Yarnä¸­ï¼Œæ¯æ¬¡æäº¤jobéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Flinké›†ç¾¤ï¼Œä»»åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“å¹¶ä¸”æ–¹ä¾¿ç®¡ç†ã€‚ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹ååˆ›å»ºçš„é›†ç¾¤ä¹Ÿä¼šæ¶ˆå¤±ã€‚</li>
</ul>
</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/yarn-cluster.png" alt="1587522665015"></p>
<h4 id="8-3-ä¸åŒæ¨¡å¼çš„ä»»åŠ¡æäº¤"><a href="#8-3-ä¸åŒæ¨¡å¼çš„ä»»åŠ¡æäº¤" class="headerlink" title="8.3 ä¸åŒæ¨¡å¼çš„ä»»åŠ¡æäº¤"></a>8.3 ä¸åŒæ¨¡å¼çš„ä»»åŠ¡æäº¤</h4><ul>
<li><p>ç¬¬ä¸€ç§æ¨¡å¼</p>
<ul>
<li><p>ã€yarn-session.sh(å¼€è¾Ÿèµ„æº) + flink run(æäº¤ä»»åŠ¡)ã€‘</p>
<ul>
<li><p>1ã€åœ¨flinkç›®å½•å¯åŠ¨yarn-session</p>
<pre><code class="shell">bin/yarn-session.sh -n 2 -tm 1024 -s 1 -d

# -n è¡¨ç¤ºç”³è¯·2ä¸ªå®¹å™¨ï¼Œ
# -s è¡¨ç¤ºæ¯ä¸ªå®¹å™¨å¯åŠ¨å¤šå°‘ä¸ªslot
# -tm è¡¨ç¤ºæ¯ä¸ªTaskManagerç”³è¯·1024Må†…å­˜
# -d è¡¨ç¤ºä»¥åå°ç¨‹åºæ–¹å¼è¿è¡Œ
</code></pre>
</li>
<li><p>2ã€ä½¿ç”¨ flink è„šæœ¬æäº¤ä»»åŠ¡</p>
<pre><code class="shell">bin/flink run examples/batch/WordCount.jar \
-input  hdfs://node01:8020/words.txt \
-output hdfs://node01:8020/output/result.txt

##è¯´æ˜ï¼šå¦‚æœå¯åŠ¨äº†å¾ˆå¤šçš„yarn-session, åœ¨æäº¤ä»»åŠ¡çš„æ—¶å€™å¯ä»¥é€šè¿‡å‚æ•° -yid æŒ‡å®šä½œä¸šæäº¤åˆ°å“ªä¸€ä¸ªyarn-sessionä¸­è¿è¡Œ
##ä¾‹å¦‚ï¼š
bin/flink run \
-yid application_1597295374041_0008 \
examples/batch/WordCount.jar \
-input  hdfs://node01:8020/words.txt \
-output hdfs://node01:8020/output/result.txt
</code></pre>
<ul>
<li>3ã€åœæ­¢ä»»åŠ¡</li>
</ul>
</li>
</ul>
<pre><code class="shell">yarn application -kill application_1587024622720_0001
</code></pre>
</li>
</ul>
</li>
<li><p>ç¬¬äºŒç§æ¨¡å¼</p>
<ul>
<li><p>ã€flink run -m yarn-cluster (å¼€è¾Ÿèµ„æº+æäº¤ä»»åŠ¡)ã€‘</p>
<ul>
<li><p>1ã€å¯åŠ¨é›†ç¾¤ï¼Œæ‰§è¡Œä»»åŠ¡</p>
<pre><code class="shell">bin/flink run -m yarn-cluster -yn 2 -yjm 1024 -ytm 1024 \
examples/batch/WordCount.jar \
-input hdfs://node01:8020/words.txt \
-output hdfs://node01:8020/output1

æ³¨æ„ï¼šclientç«¯å¿…é¡»è¦è®¾ç½®YARN_CONF_DIRæˆ–è€…HADOOP_CONF_DIRæˆ–è€…HADOOP_HOMEç¯å¢ƒå˜é‡ï¼Œé€šè¿‡è¿™ä¸ªç¯å¢ƒå˜é‡æ¥è¯»å–YARNå’ŒHDFSçš„é…ç½®ä¿¡æ¯ï¼Œå¦åˆ™å¯åŠ¨ä¼šå¤±è´¥ã€‚
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>helpä¿¡æ¯</p>
<ul>
<li><p>yarn-session.sh è„šæœ¬å‚æ•°</p>
<pre><code class="shell">ç”¨æ³•:  
 å¿…é€‰  
   -n,--container &lt;arg&gt;   åˆ†é…å¤šå°‘ä¸ªyarnå®¹å™¨ (=taskmanagerçš„æ•°é‡)  
 å¯é€‰  
   -D &lt;arg&gt;                        åŠ¨æ€å±æ€§  
   -d,--detached                   ç‹¬ç«‹è¿è¡Œ  
   -jm,--jobManagerMemory &lt;arg&gt;    JobManagerçš„å†…å­˜ [in MB]  
   -nm,--name                     åœ¨YARNä¸Šä¸ºä¸€ä¸ªè‡ªå®šä¹‰çš„åº”ç”¨è®¾ç½®ä¸€ä¸ªåå­—  
   -q,--query                      æ˜¾ç¤ºyarnä¸­å¯ç”¨çš„èµ„æº (å†…å­˜, cpuæ ¸æ•°)  
   -qu,--queue &lt;arg&gt;               æŒ‡å®šYARNé˜Ÿåˆ—.  
   -s,--slots &lt;arg&gt;                æ¯ä¸ªTaskManagerä½¿ç”¨çš„slotsæ•°é‡  
   -tm,--taskManagerMemory &lt;arg&gt;   æ¯ä¸ªTaskManagerçš„å†…å­˜ [in MB]  
   -z,--zookeeperNamespace &lt;arg&gt;   é’ˆå¯¹HAæ¨¡å¼åœ¨zookeeperä¸Šåˆ›å»ºNameSpace 
   -id,--applicationId &lt;yarnAppId&gt; YARNé›†ç¾¤ä¸Šçš„ä»»åŠ¡idï¼Œé™„ç€åˆ°ä¸€ä¸ªåå°è¿è¡Œçš„yarn    sessionä¸­
</code></pre>
</li>
<li><p>flink run  è„šæœ¬å‚æ•°</p>
<pre><code class="shell">run [OPTIONS] &lt;jar-file&gt; &lt;arguments&gt;  
 &quot;run&quot; æ“ä½œå‚æ•°:  
-c,--class &lt;classname&gt;  å¦‚æœæ²¡æœ‰åœ¨jaråŒ…ä¸­æŒ‡å®šå…¥å£ç±»ï¼Œåˆ™éœ€è¦åœ¨è¿™é‡Œé€šè¿‡è¿™ä¸ªå‚æ•°æŒ‡å®š  
-m,--jobmanager &lt;host:port&gt;  æŒ‡å®šéœ€è¦è¿æ¥çš„jobmanager(ä¸»èŠ‚ç‚¹)åœ°å€ï¼Œä½¿ç”¨è¿™ä¸ªå‚æ•°å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒäºé…ç½®æ–‡ä»¶ä¸­çš„jobmanager  
-p,--parallelism &lt;parallelism&gt;   æŒ‡å®šç¨‹åºçš„å¹¶è¡Œåº¦ã€‚å¯ä»¥è¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤å€¼ã€‚

é»˜è®¤æŸ¥æ‰¾å½“å‰yarné›†ç¾¤ä¸­å·²æœ‰çš„yarn-sessionä¿¡æ¯ä¸­çš„jobmanagerã€/tmp/.yarn-properties-rootã€‘ï¼š
./bin/flink run ./examples/batch/WordCount.jar -input hdfs://hostname:port/hello.txt -output hdfs://hostname:port/result1

è¿æ¥æŒ‡å®šhostå’Œportçš„jobmanagerï¼š
./bin/flink run -m node01:6123 ./examples/batch/WordCount.jar -input hdfs://hostname:port/hello.txt -output hdfs://hostname:port/result1

å¯åŠ¨ä¸€ä¸ªæ–°çš„yarn-sessionï¼š
./bin/flink run -m yarn-cluster -yn 2 ./examples/batch/WordCount.jar -input hdfs://hostname:port/hello.txt -output hdfs://hostname:port/result1

æ³¨æ„ï¼šyarn sessionå‘½ä»¤è¡Œçš„é€‰é¡¹ä¹Ÿå¯ä»¥ä½¿ç”¨./bin/flink å·¥å…·è·å¾—ã€‚å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªyæˆ–è€…yarnçš„å‰ç¼€
ä¾‹å¦‚ï¼šflink run -m yarn-cluster -yn 2 examples/batch/WordCount.jar 
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="8-4-Flink-on-YARNé›†ç¾¤éƒ¨ç½²"><a href="#8-4-Flink-on-YARNé›†ç¾¤éƒ¨ç½²" class="headerlink" title="8.4 Flink on YARNé›†ç¾¤éƒ¨ç½²"></a>8.4 Flink on YARNé›†ç¾¤éƒ¨ç½²</h4><ul>
<li>(1) flink on yarnè¿è¡ŒåŸç†</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/flink%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86.png" alt="flinkè¿è¡ŒåŸç†"></p>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/FlinkOnYarn.png" alt="FlinkOnYarn"></p>
<ul>
<li>å…¶å®Flink on YARNéƒ¨ç½²å¾ˆç®€å•ï¼Œå°±æ˜¯åªè¦éƒ¨ç½²å¥½hadoopé›†ç¾¤å³å¯ï¼Œæˆ‘ä»¬åªéœ€è¦éƒ¨ç½²ä¸€ä¸ªFlinkå®¢æˆ·ç«¯ï¼Œç„¶åä»flinkå®¢æˆ·ç«¯æäº¤Flinkä»»åŠ¡å³å¯ã€‚ç±»ä¼¼äºspark on yarnæ¨¡å¼ã€‚</li>
</ul>
<h3 id="ğŸ“–-9-å…¥é—¨æ¡ˆä¾‹æ¼”ç¤º"><a href="#ğŸ“–-9-å…¥é—¨æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="ğŸ“–  9.  å…¥é—¨æ¡ˆä¾‹æ¼”ç¤º"></a>ğŸ“–  9.  å…¥é—¨æ¡ˆä¾‹æ¼”ç¤º</h3><h4 id="9-1-å®æ—¶éœ€æ±‚åˆ†æ"><a href="#9-1-å®æ—¶éœ€æ±‚åˆ†æ" class="headerlink" title="9.1 å®æ—¶éœ€æ±‚åˆ†æ"></a>9.1 å®æ—¶éœ€æ±‚åˆ†æ</h4><pre><code>å®æ—¶ç»Ÿè®¡æ¯éš”1ç§’ç»Ÿè®¡æœ€è¿‘2ç§’å•è¯å‡ºç°çš„æ¬¡æ•°
</code></pre>
<ul>
<li>åˆ›å»ºmavenå·¥ç¨‹ï¼Œæ·»åŠ pomä¾èµ–</li>
</ul>
<pre><code class="xml">   &lt;properties&gt;
          &lt;flink.version&gt;1.9.2&lt;/flink.version&gt;
          &lt;scala.version&gt;2.11.8&lt;/scala.version&gt;
      &lt;/properties&gt;
  
      &lt;dependencies&gt;
          &lt;dependency&gt;
              &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;
              &lt;artifactId&gt;flink-streaming-java_2.11&lt;/artifactId&gt;
              &lt;version&gt;$&#123;flink.version&#125;&lt;/version&gt;
          &lt;/dependency&gt;
          &lt;dependency&gt;
              &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;
              &lt;artifactId&gt;flink-streaming-scala_2.11&lt;/artifactId&gt;
              &lt;version&gt;$&#123;flink.version&#125;&lt;/version&gt;
          &lt;/dependency&gt;
          &lt;dependency&gt;
              &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;
              &lt;artifactId&gt;scala-library&lt;/artifactId&gt;
              &lt;version&gt;2.11.8&lt;/version&gt;
          &lt;/dependency&gt;
      &lt;/dependencies&gt;
      &lt;build&gt;
          &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt;
          &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt;
          &lt;plugins&gt;
              &lt;plugin&gt;
                  &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;
                  &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;
                  &lt;version&gt;3.2.2&lt;/version&gt;
                  &lt;executions&gt;
                      &lt;execution&gt;
                          &lt;goals&gt;
                              &lt;goal&gt;compile&lt;/goal&gt;
                              &lt;goal&gt;testCompile&lt;/goal&gt;
                          &lt;/goals&gt;
                          &lt;configuration&gt;
                              &lt;args&gt;
                                  &lt;arg&gt;-dependencyfile&lt;/arg&gt;
                                  &lt;arg&gt;$&#123;project.build.directory&#125;/.scala_dependencies&lt;/arg&gt;
                              &lt;/args&gt;
                          &lt;/configuration&gt;
                      &lt;/execution&gt;
                  &lt;/executions&gt;
              &lt;/plugin&gt;
              &lt;plugin&gt;
                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
                  &lt;version&gt;2.4.3&lt;/version&gt;
                  &lt;executions&gt;
                      &lt;execution&gt;
                          &lt;phase&gt;package&lt;/phase&gt;
                          &lt;goals&gt;
                              &lt;goal&gt;shade&lt;/goal&gt;
                          &lt;/goals&gt;
                          &lt;configuration&gt;
                              &lt;filters&gt;
                                  &lt;filter&gt;
                                      &lt;artifact&gt;*:*&lt;/artifact&gt;
                                      &lt;excludes&gt;
                                          &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;
                                          &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;
                                          &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;
                                      &lt;/excludes&gt;
                                  &lt;/filter&gt;
                              &lt;/filters&gt;
                              &lt;transformers&gt;
                                  &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;
                                      &lt;mainClass&gt;&lt;/mainClass&gt;
                                  &lt;/transformer&gt;
                              &lt;/transformers&gt;
                          &lt;/configuration&gt;
                      &lt;/execution&gt;
                  &lt;/executions&gt;
              &lt;/plugin&gt;
          &lt;/plugins&gt;
      &lt;/build&gt;
          
</code></pre>
<h5 id="9-1-1-å®æ—¶ä»£ç å¼€å‘ï¼ˆscalaç‰ˆæœ¬ï¼‰"><a href="#9-1-1-å®æ—¶ä»£ç å¼€å‘ï¼ˆscalaç‰ˆæœ¬ï¼‰" class="headerlink" title="9.1.1 å®æ—¶ä»£ç å¼€å‘ï¼ˆscalaç‰ˆæœ¬ï¼‰"></a>9.1.1 å®æ—¶ä»£ç å¼€å‘ï¼ˆscalaç‰ˆæœ¬ï¼‰</h5><ul>
<li><p>ä»£ç å¼€å‘</p>
<pre><code class="scala">package com.kaikeba.demo1

import org.apache.flink.streaming.api.scala.&#123;DataStream, StreamExecutionEnvironment&#125;
import org.apache.flink.streaming.api.windowing.time.Time

/**
  * ä½¿ç”¨æ»‘åŠ¨çª—å£
  * æ¯éš”1ç§’é’Ÿç»Ÿè®¡æœ€è¿‘2ç§’é’Ÿçš„æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°
  */
object FlinkStream &#123;

  def main(args: Array[String]): Unit = &#123;
      //æ„å»ºæµå¤„ç†çš„ç¯å¢ƒ
        val env: StreamExecutionEnvironment = StreamExecutionEnvironment.getExecutionEnvironment

     //ä»socketè·å–æ•°æ®
       val sourceStream: DataStream[String] = env.socketTextStream(&quot;node01&quot;,9999)

     //å¯¼å…¥éšå¼è½¬æ¢çš„åŒ…
      import org.apache.flink.api.scala._

     //å¯¹æ•°æ®è¿›è¡Œå¤„ç†
     val result: DataStream[(String, Int)] = sourceStream
          .flatMap(x =&gt; x.split(&quot; &quot;)) //æŒ‰ç…§ç©ºæ ¼åˆ‡åˆ†
          .map(x =&gt; (x, 1))           //æ¯ä¸ªå•è¯è®¡ä¸º1
          .keyBy(0)                   //æŒ‰ç…§ä¸‹æ ‡ä¸º0çš„å•è¯è¿›è¡Œåˆ†ç»„      
          .timeWindow(Time.seconds(2),Time.seconds(1)) //æ¯éš”1så¤„ç†2sçš„æ•°æ®
          .sum(1)            //æŒ‰ç…§ä¸‹æ ‡ä¸º1ç´¯åŠ ç›¸åŒå•è¯å‡ºç°çš„æ¬¡æ•°

        //å¯¹æ•°æ®è¿›è¡Œæ‰“å°
        result.print()

        //å¼€å¯ä»»åŠ¡
         env.execute(&quot;FlinkStream&quot;)
      &#125;

&#125;
</code></pre>
</li>
<li><p>å‘é€ socket æ•°æ®</p>
<pre><code class="shell">##åœ¨node01ä¸Šå®‰è£…ncæœåŠ¡
sudo yum -y install nc
nc -lk 9999
</code></pre>
</li>
<li><p>æ‰“æˆjaråŒ…æäº¤åˆ°yarnä¸­è¿è¡Œ</p>
<pre><code class="shell">flink run -m yarn-cluster -yn 2 -yjm 1024 -ytm 1024 -c com.kaikeba.demo1.FlinkStream original-flink_study-1.0-SNAPSHOT.jar 
</code></pre>
</li>
</ul>
<h5 id="9-1-2-å®æ—¶ä»£ç å¼€å‘ï¼ˆjavaç‰ˆæœ¬ï¼‰"><a href="#9-1-2-å®æ—¶ä»£ç å¼€å‘ï¼ˆjavaç‰ˆæœ¬ï¼‰" class="headerlink" title="9.1.2 å®æ—¶ä»£ç å¼€å‘ï¼ˆjavaç‰ˆæœ¬ï¼‰"></a>9.1.2 å®æ—¶ä»£ç å¼€å‘ï¼ˆjavaç‰ˆæœ¬ï¼‰</h5><ul>
<li><p>ä»£ç å¼€å‘</p>
<pre><code class="java">package com.kaikeba.demo1;

import org.apache.flink.api.common.functions.FlatMapFunction;
import org.apache.flink.streaming.api.datastream.*;
import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;
import org.apache.flink.streaming.api.windowing.time.Time;
import org.apache.flink.util.Collector;

/**
 * javaä»£ç å¼€å‘å®æ—¶ç»Ÿè®¡æ¯éš”1ç§’ç»Ÿè®¡æœ€è¿‘2ç§’å•è¯å‡ºç°çš„æ¬¡æ•°
 */
public class WindowWordCountJava &#123;
    public static void main(String[] args) throws Exception &#123;

        //æ­¥éª¤ä¸€ï¼šè·å–æµå¼å¤„ç†ç¯å¢ƒ
        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();

        //æ­¥éª¤äºŒï¼šè·å–socketæ•°æ®
        DataStreamSource&lt;String&gt; sourceDstream = env.socketTextStream(&quot;node01&quot;, 9999);

        //æ­¥éª¤ä¸‰ï¼šå¯¹æ•°æ®è¿›è¡Œå¤„ç†
        DataStream&lt;WordCount&gt; wordAndOneStream = sourceDstream.flatMap(new FlatMapFunction&lt;String, WordCount&gt;() &#123;
            public void flatMap(String line, Collector&lt;WordCount&gt; collector) throws Exception &#123;
                String[] words = line.split(&quot; &quot;);
                for (String word : words) &#123;
                    collector.collect(new WordCount(word, 1L));
                &#125;

            &#125;
        &#125;);


DataStream&lt;WordCount&gt; resultStream = wordAndOneStream
      .keyBy(&quot;word&quot;)  //æŒ‰ç…§å•è¯åˆ†ç»„
      .timeWindow(Time.seconds(2), Time.seconds(1)) //æ¯éš”1sç»Ÿè®¡2sçš„æ•°æ®
      .sum(&quot;count&quot;);   //æŒ‰ç…§countå­—æ®µç´¯åŠ ç»“æœ

  //æ­¥éª¤å››ï¼šç»“æœæ‰“å°
  resultStream.print();

   //æ­¥éª¤äº”ï¼šä»»åŠ¡å¯åŠ¨
  env.execute(&quot;WindowWordCountJava&quot;);
    &#125;


    public static class WordCount&#123;
        public String word;
        public long count;
        //è®°å¾—è¦æœ‰è¿™ä¸ªç©ºæ„å»º
        public WordCount()&#123;

        &#125;
        public WordCount(String word,long count)&#123;
            this.word = word;
            this.count = count;
        &#125;

        @Override
        public String toString() &#123;
            return &quot;WordCount&#123;&quot; +
                    &quot;word=&#39;&quot; + word + &#39;\&#39;&#39; +
                    &quot;, count=&quot; + count +
                    &#39;&#125;&#39;;
        &#125;

        &#125;
&#125;
</code></pre>
</li>
<li><p>å‘é€socketæ•°æ®</p>
<pre><code class="shell">#åœ¨node01ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå‘é€æ•°æ®
nc -lk 9999
</code></pre>
</li>
</ul>
<h4 id="9-2-ç¦»çº¿éœ€æ±‚åˆ†æ"><a href="#9-2-ç¦»çº¿éœ€æ±‚åˆ†æ" class="headerlink" title="9.2 ç¦»çº¿éœ€æ±‚åˆ†æ"></a>9.2 ç¦»çº¿éœ€æ±‚åˆ†æ</h4><pre><code>å¯¹æ–‡ä»¶è¿›è¡Œå•è¯è®¡æ•°ï¼Œç»Ÿè®¡æ–‡ä»¶å½“ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚
</code></pre>
<h5 id="9-2-1-ç¦»çº¿ä»£ç å¼€å‘ï¼ˆscalaï¼‰"><a href="#9-2-1-ç¦»çº¿ä»£ç å¼€å‘ï¼ˆscalaï¼‰" class="headerlink" title="9.2.1 ç¦»çº¿ä»£ç å¼€å‘ï¼ˆscalaï¼‰"></a>9.2.1 ç¦»çº¿ä»£ç å¼€å‘ï¼ˆscalaï¼‰</h5><pre><code class="scala">package com.kaikeba.demo1

import org.apache.flink.api.scala.&#123; DataSet, ExecutionEnvironment&#125;

/**
  * scalaå¼€å‘flinkçš„æ‰¹å¤„ç†ç¨‹åº
  */
object FlinkFileCount &#123;
  def main(args: Array[String]): Unit = &#123;

     //todo:1ã€æ„å»ºFlinkçš„æ‰¹å¤„ç†ç¯å¢ƒ
    val env: ExecutionEnvironment = ExecutionEnvironment.getExecutionEnvironment

    //todo:2ã€è¯»å–æ•°æ®æ–‡ä»¶
    val fileDataSet: DataSet[String] = env.readTextFile(&quot;d:\\words.txt&quot;)

     import org.apache.flink.api.scala._

    //todo: 3ã€å¯¹æ•°æ®è¿›è¡Œå¤„ç†
      val resultDataSet: AggregateDataSet[(String, Int)] = fileDataSet
                                                .flatMap(x=&gt; x.split(&quot; &quot;))
                                                .map(x=&gt;(x,1))
                                                .groupBy(0)
                                                .sum(1)

    //todo: 4ã€æ‰“å°ç»“æœ
        resultDataSet.print()

    //todo: 5ã€ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
       resultDataSet.writeAsText(&quot;d:\\result&quot;)

       env.execute(&quot;FlinkFileCount&quot;)
  &#125;
&#125;
</code></pre>
<h3 id="ğŸ“–-10-Flinkå¹¶è¡Œåº¦-amp-Slot-amp-Task"><a href="#ğŸ“–-10-Flinkå¹¶è¡Œåº¦-amp-Slot-amp-Task" class="headerlink" title="ğŸ“–  10. Flinkå¹¶è¡Œåº¦&amp;Slot&amp;Task"></a>ğŸ“–  10. Flinkå¹¶è¡Œåº¦&amp;Slot&amp;Task</h3><pre><code>    Flinkçš„æ¯ä¸ªTaskManagerä¸ºé›†ç¾¤æä¾›soltã€‚æ¯ä¸ªtask slotä»£è¡¨äº†TaskManagerçš„ä¸€ä¸ªå›ºå®šå¤§å°çš„èµ„æºå­é›†ã€‚ soltçš„æ•°é‡é€šå¸¸ä¸æ¯ä¸ªTaskManagerèŠ‚ç‚¹çš„å¯ç”¨CPUå†…æ ¸æ•°æˆæ¯”ä¾‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä½ çš„slotæ•°æ˜¯ä½ æ¯ä¸ªèŠ‚ç‚¹çš„cpuçš„æ ¸æ•°ã€‚
</code></pre>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1587211958715.png" alt="1587211958715"></p>
<h4 id="10-1-å¹¶è¡Œåº¦"><a href="#10-1-å¹¶è¡Œåº¦" class="headerlink" title="10.1 å¹¶è¡Œåº¦"></a>10.1 å¹¶è¡Œåº¦</h4><p>ä¸€ä¸ªFlinkç¨‹åºç”±å¤šä¸ªä»»åŠ¡ç»„æˆ(sourceã€transformationå’Œ sink)ã€‚ ä¸€ä¸ªä»»åŠ¡ç”±å¤šä¸ªå¹¶è¡Œçš„å®ä¾‹(çº¿ç¨‹)æ¥æ‰§è¡Œï¼Œ ä¸€ä¸ªä»»åŠ¡çš„å¹¶è¡Œå®ä¾‹ (çº¿ç¨‹) æ•°ç›®å°±è¢«ç§°ä¸ºè¯¥ä»»åŠ¡çš„å¹¶è¡Œåº¦ã€‚</p>
<h4 id="10-2-å¹¶è¡Œåº¦çš„è®¾ç½®"><a href="#10-2-å¹¶è¡Œåº¦çš„è®¾ç½®" class="headerlink" title="10.2  å¹¶è¡Œåº¦çš„è®¾ç½®"></a>10.2  å¹¶è¡Œåº¦çš„è®¾ç½®</h4><ul>
<li>ä¸€ä¸ªä»»åŠ¡çš„å¹¶è¡Œåº¦è®¾ç½®å¯ä»¥ä»å¤šä¸ªçº§åˆ«æŒ‡å®š<ul>
<li>Operator Levelï¼ˆç®—å­çº§åˆ«ï¼‰</li>
<li>Execution Environment Levelï¼ˆæ‰§è¡Œç¯å¢ƒçº§åˆ«ï¼‰</li>
<li>Client Levelï¼ˆå®¢æˆ·ç«¯çº§åˆ«ï¼‰</li>
<li>System Levelï¼ˆç³»ç»Ÿçº§åˆ«ï¼‰</li>
</ul>
</li>
<li>è¿™äº›å¹¶è¡Œåº¦çš„ä¼˜å…ˆçº§ä¸º <ul>
<li>Operator Level &gt; Execution Environment Level &gt; Client Level &gt; System Level</li>
</ul>
</li>
</ul>
<h5 id="10-2-1-ç®—å­çº§åˆ«"><a href="#10-2-1-ç®—å­çº§åˆ«" class="headerlink" title="10.2.1 ç®—å­çº§åˆ«"></a>10.2.1 ç®—å­çº§åˆ«</h5><p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1574472860477.png" alt="1574472860477"></p>
<h5 id="10-2-2-æ‰§è¡Œç¯å¢ƒçº§åˆ«"><a href="#10-2-2-æ‰§è¡Œç¯å¢ƒçº§åˆ«" class="headerlink" title="10.2.2 æ‰§è¡Œç¯å¢ƒçº§åˆ«"></a>10.2.2 æ‰§è¡Œç¯å¢ƒçº§åˆ«</h5><p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1574472880358.png" alt="1574472880358"></p>
<p>â€‹	</p>
<h5 id="10-2-3-å®¢æˆ·ç«¯çº§åˆ«"><a href="#10-2-3-å®¢æˆ·ç«¯çº§åˆ«" class="headerlink" title="10.2.3 å®¢æˆ·ç«¯çº§åˆ«"></a>10.2.3 å®¢æˆ·ç«¯çº§åˆ«</h5><ul>
<li><p>å¹¶è¡Œåº¦å¯ä»¥åœ¨å®¢æˆ·ç«¯å°†jobæäº¤åˆ°Flinkæ—¶è®¾å®šï¼Œå¯¹äºCLIå®¢æˆ·ç«¯ï¼Œå¯ä»¥é€šè¿‡-på‚æ•°æŒ‡å®šå¹¶è¡Œåº¦</p>
<pre><code class="shell">bin/flink run -p 10 examples/batch/WordCount.jar
</code></pre>
</li>
</ul>
<h5 id="10-2-4-ç³»ç»Ÿçº§åˆ«"><a href="#10-2-4-ç³»ç»Ÿçº§åˆ«" class="headerlink" title="10.2.4 ç³»ç»Ÿçº§åˆ«"></a>10.2.4 ç³»ç»Ÿçº§åˆ«</h5><ul>
<li><p>åœ¨ç³»ç»Ÿçº§å¯ä»¥é€šè¿‡è®¾ç½®&#x3D;&#x3D;flink-conf.yaml&#x3D;&#x3D;æ–‡ä»¶ä¸­çš„&#x3D;&#x3D;parallelism.default&#x3D;&#x3D;å±æ€§æ¥æŒ‡å®šæ‰€æœ‰æ‰§è¡Œç¯å¢ƒçš„é»˜è®¤å¹¶è¡Œåº¦</p>
<pre><code class="yaml">parallelism.default: 1
</code></pre>
</li>
</ul>
<h4 id="10-3-å¹¶è¡Œåº¦æ“ä½œæ¼”ç¤º"><a href="#10-3-å¹¶è¡Œåº¦æ“ä½œæ¼”ç¤º" class="headerlink" title="10.3 å¹¶è¡Œåº¦æ“ä½œæ¼”ç¤º"></a>10.3 å¹¶è¡Œåº¦æ“ä½œæ¼”ç¤º</h4><ul>
<li><p>ä¸ºäº†æ–¹ä¾¿åœ¨æœ¬åœ°æµ‹è¯•è§‚å¯Ÿä»»åŠ¡å¹¶è¡Œåº¦ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æœ¬åœ°å·¥ç¨‹æ·»åŠ ä»¥ä¸‹ä¾èµ–</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;
    &lt;artifactId&gt;flink-runtime-web_2.11&lt;/artifactId&gt;
    &lt;version&gt;$&#123;flink.version&#125;&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li><p>æ¡ˆä¾‹</p>
<ul>
<li>æ³¨æ„è·å–ç¨‹åºçš„æ‰§è¡Œç¯å¢ƒå‘ç”Ÿå˜åŒ–äº†</li>
<li>&#x3D;&#x3D;val environment&#x3D;StreamExecutionEnvironment.createLocalEnvironmentWithWebUI()&#x3D;&#x3D;</li>
</ul>
<pre><code class="scala">package com.kaikeba.demo1

import org.apache.flink.core.fs.FileSystem.WriteMode
import org.apache.flink.streaming.api.scala.&#123;DataStream, StreamExecutionEnvironment&#125;
import org.apache.flink.streaming.api.windowing.time.Time

/**
  * æœ¬åœ°è°ƒè¯•å¹¶è¡Œåº¦
  */
object TestParallelism &#123;

  def main(args: Array[String]): Unit = &#123;

     //ä½¿ç”¨createLocalEnvironmentWithWebUIæ–¹æ³•ï¼Œæ„å»ºæœ¬åœ°æµå¼å¤„ç†ç¯å¢ƒ
    val environment: StreamExecutionEnvironment = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI()
     //æ‰§è¡Œç¯å¢ƒçº§åˆ«
    //environment.setParallelism(4)

    import org.apache.flink.api.scala._

    //æ¥å—socketæ•°æ®
    val sourceStream: DataStream[String] = environment.socketTextStream(&quot;node01&quot;,9999)

    val countStream: DataStream[(String, Int)] = sourceStream
                        .flatMap(x =&gt; x.split(&quot; &quot;)).setParallelism(5) //ç®—å­çº§åˆ«
                        .map(x =&gt; (x, 1))
                        .keyBy(0)
                        .timeWindow(Time.seconds(2), Time.seconds(1))
                        .sum(1)

    countStream.print()

    environment.execute()

  &#125;
&#125;
</code></pre>
<ul>
<li>è®¾ç½®å¹¶è¡Œåº¦ï¼Œè§‚å¯Ÿlocalhost:8081ç•Œé¢</li>
</ul>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1587363866623.png" alt="1587363866623"></p>
<p><img src="/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/1587363947147.png" alt="1587363947147"></p>
</li>
</ul>
<h2 id="five-äº”ã€æ€»ç»“"><a href="#five-äº”ã€æ€»ç»“" class="headerlink" title=":five: äº”ã€æ€»ç»“"></a>:five: äº”ã€æ€»ç»“</h2><ul>
<li><p>æŒæ¡Flinkçš„ç¼–ç¨‹è§„èŒƒ</p>
</li>
<li><p>äº†è§£Flinkçš„é›†ç¾¤æ¨¡å¼</p>
</li>
</ul>
<h2 id="six-å…­-ã€ä½œä¸š"><a href="#six-å…­-ã€ä½œä¸š" class="headerlink" title=":six: å…­ ã€ä½œä¸š"></a>:six: å…­ ã€ä½œä¸š</h2><ol>
<li>å®ç°ä¸Šè¯¾ä¸­çš„ä¾‹å­</li>
<li>æ­å»ºFlink on YARNé›†ç¾¤</li>
<li>å¾€é›†ç¾¤ä¸Šé¢æäº¤ä»»åŠ¡</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">ä¸‰å±±</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://star-light-star-bright.github.io/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/">https://star-light-star-bright.github.io/si-fang-cai-zi-liao-zheng-li/flink/shen-ru-qian-chu-flink-di-yi-tian/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">ä¸‰å±±</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Flink/">
                                    <span class="chip bg-color">Flink</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/shu-ju-hu/shu-ju-hu/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="æ•°æ®æ¹–">
                        
                        <span class="card-title">æ•°æ®æ¹–</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-24
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E6%B9%96/" class="post-category">
                                    æ•°æ®æ¹–
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E6%B9%96/">
                        <span class="chip bg-color">æ•°æ®æ¹–</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/si-fang-cai-zi-liao-zheng-li/mian-shi-ti/ji-zhu-wen-ti-hui-zong/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="é¢è¯•æŠ€æœ¯é—®é¢˜æ±‡æ€»">
                        
                        <span class="card-title">é¢è¯•æŠ€æœ¯é—®é¢˜æ±‡æ€»</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-01-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-category">
                                    é¢è¯•é¢˜
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/">
                        <span class="chip bg-color">é¢è¯•é¢˜</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2025</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">ä¸‰å±±</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;æ¬¡
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;äºº
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2234607886" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 2234607886" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è®¢é˜…" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
